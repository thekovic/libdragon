<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdragon: asset.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo2.png"/></td>
  <td id="projectalign">
   <div id="projectname">libdragon
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">asset.h File Reference<div class="ingroups"><a class="el" href="group__libdragon.html">libdragon</a> &raquo; <a class="el" href="group__asset.html">Asset Subsystem</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Asset Subsystem.  
<a href="#details">More...</a></p>

<p><a href="asset_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6bdfd4d8e3a7e807dd7e1b8cb00332a4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="asset_8h.html#a6bdfd4d8e3a7e807dd7e1b8cb00332a4">asset_init_compression</a>(level)</td></tr>
<tr class="memdesc:a6bdfd4d8e3a7e807dd7e1b8cb00332a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable a non-default compression level.  <a href="asset_8h.html#a6bdfd4d8e3a7e807dd7e1b8cb00332a4">More...</a><br /></td></tr>
<tr class="separator:a6bdfd4d8e3a7e807dd7e1b8cb00332a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abfc5939446d9920b884df034e89428a9"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="asset_8h.html#abfc5939446d9920b884df034e89428a9">asset_load</a> (const char *fn, int *sz)</td></tr>
<tr class="memdesc:abfc5939446d9920b884df034e89428a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load an asset file (possibly uncompressing it)  <a href="asset_8h.html#abfc5939446d9920b884df034e89428a9">More...</a><br /></td></tr>
<tr class="separator:abfc5939446d9920b884df034e89428a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac731b2beb346c99f36fa8f355fb84509"><td class="memItemLeft" align="right" valign="top">FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="asset_8h.html#ac731b2beb346c99f36fa8f355fb84509">asset_fopen</a> (const char *fn, int *sz)</td></tr>
<tr class="memdesc:ac731b2beb346c99f36fa8f355fb84509"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an asset file for reading (with transparent decompression)  <a href="asset_8h.html#ac731b2beb346c99f36fa8f355fb84509">More...</a><br /></td></tr>
<tr class="separator:ac731b2beb346c99f36fa8f355fb84509"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Asset Subsystem. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6bdfd4d8e3a7e807dd7e1b8cb00332a4" name="a6bdfd4d8e3a7e807dd7e1b8cb00332a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bdfd4d8e3a7e807dd7e1b8cb00332a4">&#9670;&nbsp;</a></span>asset_init_compression</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define asset_init_compression</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">level</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable a non-default compression level. </p>
<p >This function must be called if any asset that will be loaded use a non-default compression level. The default compression level is 1, for which no initialization is required.</p>
<p >Currently, only level 2 requires initialization. If you have any assets compressed with level 2, you must call this function before loading them.</p>
<div class="fragment"><div class="line"><a class="code hl_define" href="asset_8h.html#a6bdfd4d8e3a7e807dd7e1b8cb00332a4">asset_init_compression</a>(2); </div>
<div class="line"> </div>
<div class="line"><span class="comment">// Load an asset that might use level 2 compression</span></div>
<div class="line"><a class="code hl_struct" href="sprite_8h.html#structsprite__t">sprite_t</a> *hero = <a class="code hl_function" href="sprite_8h.html#a746970338ac3f8db984b4f08fc6e9a21">sprite_load</a>(<span class="stringliteral">&quot;rom:/hero.sprite&quot;</span>);</div>
<div class="ttc" id="aasset_8h_html_a6bdfd4d8e3a7e807dd7e1b8cb00332a4"><div class="ttname"><a href="asset_8h.html#a6bdfd4d8e3a7e807dd7e1b8cb00332a4">asset_init_compression</a></div><div class="ttdeci">#define asset_init_compression(level)</div><div class="ttdoc">Enable a non-default compression level.</div><div class="ttdef"><b>Definition:</b> asset.h:105</div></div>
<div class="ttc" id="asprite_8h_html_a746970338ac3f8db984b4f08fc6e9a21"><div class="ttname"><a href="sprite_8h.html#a746970338ac3f8db984b4f08fc6e9a21">sprite_load</a></div><div class="ttdeci">sprite_t * sprite_load(const char *fn)</div><div class="ttdoc">Load a sprite from a filesystem (eg: ROM)</div><div class="ttdef"><b>Definition:</b> sprite.c:69</div></div>
<div class="ttc" id="asprite_8h_html_structsprite__t"><div class="ttname"><a href="sprite_8h.html#structsprite__t">sprite_t</a></div><div class="ttdoc">Sprite structure.</div><div class="ttdef"><b>Definition:</b> sprite.h:40</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>Compression level to initialize</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="asset_8h.html#abfc5939446d9920b884df034e89428a9" title="Load an asset file (possibly uncompressing it)">asset_load</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abfc5939446d9920b884df034e89428a9" name="abfc5939446d9920b884df034e89428a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfc5939446d9920b884df034e89428a9">&#9670;&nbsp;</a></span>asset_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * asset_load </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load an asset file (possibly uncompressing it) </p>
<p >This function loads a file from a file system (eg: from ROM or SD). If the file was compressed using the mkasset tool, it will be automatically uncompressed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>Filename to load (including filesystem prefix, eg: "rom:/foo.dat") </td></tr>
    <tr><td class="paramname">sz</td><td>If not NULL, this will be filed with the uncompressed size of the loaded file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void* Pointer to the loaded file (must be freed with free() when done) </dd></dl>

</div>
</div>
<a id="ac731b2beb346c99f36fa8f355fb84509" name="ac731b2beb346c99f36fa8f355fb84509"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac731b2beb346c99f36fa8f355fb84509">&#9670;&nbsp;</a></span>asset_fopen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FILE * asset_fopen </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open an asset file for reading (with transparent decompression) </p>
<p >This function opens a file from a file system (eg: from ROM or SD). If the file was compressed using the mkasset tool, it will be automatically uncompressed as it is being read.</p>
<p >Note that since the file might be compressed, the returned FILE* cannot be arbitrarily seeked backward, as that would be impossible to do efficiently on a compressed file. Seeking forward is supported and is simulated by reading (decompressing) and discarding data. You can rewind the file to the start though, (by using either fseek or rewind).</p>
<p >This behavior of the returned file is enforced also for non compressed assets, so that the code is ready to switch to compressed assets if required. If you need random access to an uncompressed file, simply use the standard fopen() function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>Filename to load (including filesystem prefix, eg: "rom:/foo.dat") </td></tr>
    <tr><td class="paramname">sz</td><td>If not NULL, this will be filed with the uncompressed size of the loaded file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FILE* FILE pointer to use with standard C functions (fread, fclose) </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
