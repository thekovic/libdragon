<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdragon: rdpq_tex.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libdragon
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_e82f31e8932771ae6769214a98ceba7f.html">rdpq</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">rdpq_tex.c File Reference<div class="ingroups"><a class="el" href="group__libdragon.html">libdragon</a> &raquo; <a class="el" href="group__display.html">Display Subsystem</a> &raquo; <a class="el" href="group__rdp.html">(Deprecated) Old RDP library</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>RDP Command queue: texture loading.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structrdpq__multi__upload__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__tex_8c.html#structrdpq__multi__upload__t">rdpq_multi_upload_t</a></td></tr>
<tr class="memdesc:structrdpq__multi__upload__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Non-zero if we are doing a multi-texture upload.  <a href="rdpq__tex_8c.html#structrdpq__multi__upload__t">More...</a><br /></td></tr>
<tr class="separator:structrdpq__multi__upload__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0e74782c441e3437dd8c0ba496d2386f"><td class="memItemLeft" align="right" valign="top"><a id="a0e74782c441e3437dd8c0ba496d2386f" name="a0e74782c441e3437dd8c0ba496d2386f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TMEM_PALETTE_ADDR</b>&#160;&#160;&#160;0x800</td></tr>
<tr class="memdesc:a0e74782c441e3437dd8c0ba496d2386f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Address in TMEM where the palettes must be loaded. <br /></td></tr>
<tr class="separator:a0e74782c441e3437dd8c0ba496d2386f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a71e8dc49b1225572f0f2a688a533cca2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__tex_8c.html#a71e8dc49b1225572f0f2a688a533cca2">integer_to_pow2</a> (int x)</td></tr>
<tr class="memdesc:a71e8dc49b1225572f0f2a688a533cca2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the first power of 2 that is equal or larger than size.  <a href="rdpq__tex_8c.html#a71e8dc49b1225572f0f2a688a533cca2">More...</a><br /></td></tr>
<tr class="separator:a71e8dc49b1225572f0f2a688a533cca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02d0ec8eab1907101928c226831e6af3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__tex_8c.html#a02d0ec8eab1907101928c226831e6af3">rdpq_tex_upload_sub</a> (<a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a> tile, const <a class="el" href="surface_8h.html#structsurface__t">surface_t</a> *tex, const <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t">rdpq_texparms_t</a> *parms, int s0, int t0, int s1, int t1)</td></tr>
<tr class="memdesc:a02d0ec8eab1907101928c226831e6af3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a portion of texture into TMEM.  <a href="rdpq__tex_8c.html#a02d0ec8eab1907101928c226831e6af3">More...</a><br /></td></tr>
<tr class="separator:a02d0ec8eab1907101928c226831e6af3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa36de4024b0a12f37ddfc5544bcbfa4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__tex_8c.html#aaa36de4024b0a12f37ddfc5544bcbfa4">rdpq_tex_upload</a> (<a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a> tile, const <a class="el" href="surface_8h.html#structsurface__t">surface_t</a> *tex, const <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t">rdpq_texparms_t</a> *parms)</td></tr>
<tr class="memdesc:aaa36de4024b0a12f37ddfc5544bcbfa4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a texture into TMEM.  <a href="rdpq__tex_8c.html#aaa36de4024b0a12f37ddfc5544bcbfa4">More...</a><br /></td></tr>
<tr class="separator:aaa36de4024b0a12f37ddfc5544bcbfa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26a1b8180d070fa5c3c502b3a12fe3fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__tex_8c.html#a26a1b8180d070fa5c3c502b3a12fe3fe">rdpq_tex_reuse_sub</a> (<a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a> tile, const <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t">rdpq_texparms_t</a> *parms, int s0, int t0, int s1, int t1)</td></tr>
<tr class="memdesc:a26a1b8180d070fa5c3c502b3a12fe3fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reuse a portion of the previously uploaded texture to TMEM.  <a href="rdpq__tex_8c.html#a26a1b8180d070fa5c3c502b3a12fe3fe">More...</a><br /></td></tr>
<tr class="separator:a26a1b8180d070fa5c3c502b3a12fe3fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af514874c6ceb56dd3ba523c908599a6d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__tex_8c.html#af514874c6ceb56dd3ba523c908599a6d">rdpq_tex_reuse</a> (<a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a> tile, const <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t">rdpq_texparms_t</a> *parms)</td></tr>
<tr class="memdesc:af514874c6ceb56dd3ba523c908599a6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reuse the previously uploaded texture to TMEM.  <a href="rdpq__tex_8c.html#af514874c6ceb56dd3ba523c908599a6d">More...</a><br /></td></tr>
<tr class="separator:af514874c6ceb56dd3ba523c908599a6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3036fad32c89c664f95cb5f7eb3f025"><td class="memItemLeft" align="right" valign="top"><a id="af3036fad32c89c664f95cb5f7eb3f025" name="af3036fad32c89c664f95cb5f7eb3f025"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__rdpq_tex_blit</b> (const <a class="el" href="surface_8h.html#structsurface__t">surface_t</a> *surf, float x0, float y0, const <a class="el" href="rdpq__tex_8h.html#structrdpq__blitparms__t">rdpq_blitparms_t</a> *parms, large_tex_draw ltd)</td></tr>
<tr class="memdesc:af3036fad32c89c664f95cb5f7eb3f025"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal implementation of <a class="el" href="rdpq__tex_8c.html#a3a74ebb71eafae1b357a40417916854c" title="Blit a surface to the active framebuffer.">rdpq_tex_blit</a>, using a custom large tex loader callback function. <br /></td></tr>
<tr class="separator:af3036fad32c89c664f95cb5f7eb3f025"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a74ebb71eafae1b357a40417916854c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__tex_8c.html#a3a74ebb71eafae1b357a40417916854c">rdpq_tex_blit</a> (const <a class="el" href="surface_8h.html#structsurface__t">surface_t</a> *surf, float x0, float y0, const <a class="el" href="rdpq__tex_8h.html#structrdpq__blitparms__t">rdpq_blitparms_t</a> *parms)</td></tr>
<tr class="memdesc:a3a74ebb71eafae1b357a40417916854c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blit a surface to the active framebuffer.  <a href="rdpq__tex_8c.html#a3a74ebb71eafae1b357a40417916854c">More...</a><br /></td></tr>
<tr class="separator:a3a74ebb71eafae1b357a40417916854c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30a8e20ae24686b902d5d572e158fbd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__tex_8c.html#a30a8e20ae24686b902d5d572e158fbd6">rdpq_tex_upload_tlut</a> (uint16_t *tlut, int color_idx, int num_colors)</td></tr>
<tr class="memdesc:a30a8e20ae24686b902d5d572e158fbd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load one or more palettes into TMEM.  <a href="rdpq__tex_8c.html#a30a8e20ae24686b902d5d572e158fbd6">More...</a><br /></td></tr>
<tr class="separator:a30a8e20ae24686b902d5d572e158fbd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac11f8d4ea6150c99080d1e4db70542eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__tex_8c.html#ac11f8d4ea6150c99080d1e4db70542eb">rdpq_tex_multi_begin</a> (void)</td></tr>
<tr class="memdesc:ac11f8d4ea6150c99080d1e4db70542eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begin a multi-texture upload.  <a href="rdpq__tex_8c.html#ac11f8d4ea6150c99080d1e4db70542eb">More...</a><br /></td></tr>
<tr class="separator:ac11f8d4ea6150c99080d1e4db70542eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5767fbc372c1bfc589371b974177491b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__tex_8c.html#a5767fbc372c1bfc589371b974177491b">rdpq_tex_multi_end</a> (void)</td></tr>
<tr class="memdesc:a5767fbc372c1bfc589371b974177491b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish a multi-texture upload.  <a href="rdpq__tex_8c.html#a5767fbc372c1bfc589371b974177491b">More...</a><br /></td></tr>
<tr class="separator:a5767fbc372c1bfc589371b974177491b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2ce9c15c626f5a31fee59757004bce51"><td class="memItemLeft" align="right" valign="top"><a id="a2ce9c15c626f5a31fee59757004bce51" name="a2ce9c15c626f5a31fee59757004bce51"></a>
tex_loader_t&#160;</td><td class="memItemRight" valign="bottom"><b>last_tload</b></td></tr>
<tr class="memdesc:a2ce9c15c626f5a31fee59757004bce51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Information on last image uploaded we are doing a multi-texture upload. <br /></td></tr>
<tr class="separator:a2ce9c15c626f5a31fee59757004bce51"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >RDP Command queue: texture loading. </p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structrdpq__multi__upload__t" id="structrdpq__multi__upload__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structrdpq__multi__upload__t">&#9670;&nbsp;</a></span>rdpq_multi_upload_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct rdpq_multi_upload_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p >Non-zero if we are doing a multi-texture upload. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a2613e9f966152146220af3bd5a454999" name="a2613e9f966152146220af3bd5a454999"></a>int</td>
<td class="fieldname">
used</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ae18ab69e05c9234d190ff548ed3fe223" name="ae18ab69e05c9234d190ff548ed3fe223"></a>int</td>
<td class="fieldname">
bytes</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="aafdfd5bd21100cb33e12c598fc3bd4b7" name="aafdfd5bd21100cb33e12c598fc3bd4b7"></a>int</td>
<td class="fieldname">
limit</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a71e8dc49b1225572f0f2a688a533cca2" name="a71e8dc49b1225572f0f2a688a533cca2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71e8dc49b1225572f0f2a688a533cca2">&#9670;&nbsp;</a></span>integer_to_pow2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int integer_to_pow2 </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the first power of 2 that is equal or larger than size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>input in units </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Power of 2 that is equal or larger than x </dd></dl>

</div>
</div>
<a id="a02d0ec8eab1907101928c226831e6af3" name="a02d0ec8eab1907101928c226831e6af3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02d0ec8eab1907101928c226831e6af3">&#9670;&nbsp;</a></span>rdpq_tex_upload_sub()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdpq_tex_upload_sub </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a>&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="surface_8h.html#structsurface__t">surface_t</a> *&#160;</td>
          <td class="paramname"><em>tex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t">rdpq_texparms_t</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>s0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>t0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>s1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>t1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a portion of texture into TMEM. </p>
<p >This function is similar to <a class="el" href="rdpq__tex_8h.html#aaa36de4024b0a12f37ddfc5544bcbfa4" title="Load a texture into TMEM.">rdpq_tex_upload</a>, but only loads a portion of a texture in TMEM. The portion is specified as a rectangle (with exclusive bounds) that must be contained within the original texture.</p>
<p >Notice that, after calling this function, you must draw the polygon using texture coordinates that are contained within the loaded ones. For instance:</p>
<div class="fragment"><div class="line"><span class="comment">// Load a 32x32 sprite starting at position (100,100) in the</span></div>
<div class="line"><span class="comment">// &quot;spritemap&quot; surface.</span></div>
<div class="line"><a class="code hl_function" href="rdpq__tex_8c.html#a02d0ec8eab1907101928c226831e6af3">rdpq_tex_upload_sub</a>(<a class="code hl_enumvalue" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931eadb7ac46392b285fc6cbac9404f189cc1">TILE2</a>, spritemap, 0, 100, 100, 132, 132);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Draw the sprite. Notice that we must refer to it using the</span></div>
<div class="line"><span class="comment">// original texture coordinates, even if just that portion is in TMEM.</span></div>
<div class="line"><a class="code hl_define" href="rdpq__rect_8h.html#a7196362c567172a2012f414c8a412743">rdpq_texture_rectangle</a>(<a class="code hl_enumvalue" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931eadb7ac46392b285fc6cbac9404f189cc1">TILE2</a>,</div>
<div class="line">    pos_x, pos_y, pos_x+32, pos_y+32,   <span class="comment">// screen coordinates of the sprite</span></div>
<div class="line">    100, 100,                           <span class="comment">// texture coordinates</span></div>
<div class="line">    1.0, 1.0);                          <span class="comment">// texture increments (= no scaling)</span></div>
<div class="ttc" id="ardpq_8h_html_a8d34f311d2e71435652a57adb1d6931eadb7ac46392b285fc6cbac9404f189cc1"><div class="ttname"><a href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931eadb7ac46392b285fc6cbac9404f189cc1">TILE2</a></div><div class="ttdeci">@ TILE2</div><div class="ttdoc">Tile #2 (for code readability)</div><div class="ttdef"><b>Definition:</b> rdpq.h:252</div></div>
<div class="ttc" id="ardpq__rect_8h_html_a7196362c567172a2012f414c8a412743"><div class="ttname"><a href="rdpq__rect_8h.html#a7196362c567172a2012f414c8a412743">rdpq_texture_rectangle</a></div><div class="ttdeci">#define rdpq_texture_rectangle(tile, x0, y0, x1, y1, s, t)</div><div class="ttdoc">Draw a textured rectangle (RDP command: TEXTURE_RECTANGLE)</div><div class="ttdef"><b>Definition:</b> rdpq_rect.h:293</div></div>
<div class="ttc" id="ardpq__tex_8c_html_a02d0ec8eab1907101928c226831e6af3"><div class="ttname"><a href="rdpq__tex_8c.html#a02d0ec8eab1907101928c226831e6af3">rdpq_tex_upload_sub</a></div><div class="ttdeci">int rdpq_tex_upload_sub(rdpq_tile_t tile, const surface_t *tex, const rdpq_texparms_t *parms, int s0, int t0, int s1, int t1)</div><div class="ttdoc">Load a portion of texture into TMEM.</div><div class="ttdef"><b>Definition:</b> rdpq_tex.c:365</div></div>
</div><!-- fragment --><p >An alternative to this function is to call <a class="el" href="surface_8h.html#a201a14d89649b0f81ef8d535b724b34f" title="Initialize a surface_t structure, pointing to a rectangular portion of another surface.">surface_make_sub</a> on the texture to create a sub-surface, and then call rdpq_tex_upload on the sub-surface. The same data will be loaded into TMEM but this time the RDP ignores that you are loading a portion of a larger texture:</p>
<div class="fragment"><div class="line"><span class="comment">// Create a sub-surface of spritemap texture. No memory allocations</span></div>
<div class="line"><span class="comment">// or pixel copies are performed, this is just a rectangular &quot;window&quot;</span></div>
<div class="line"><span class="comment">// into the original texture.</span></div>
<div class="line"><a class="code hl_struct" href="surface_8h.html#structsurface__t">surface_t</a> hero = <a class="code hl_function" href="surface_8c.html#a201a14d89649b0f81ef8d535b724b34f">surface_make_sub</a>(spritemap, 100, 100, 32, 32);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Load the sub-surface. Notice that the RDP is unaware that it is</span></div>
<div class="line"><span class="comment">// a sub-surface; it will think that it is a whole texture.</span></div>
<div class="line"><a class="code hl_function" href="rdpq__tex_8c.html#aaa36de4024b0a12f37ddfc5544bcbfa4">rdpq_tex_upload</a>(<a class="code hl_enumvalue" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931eadb7ac46392b285fc6cbac9404f189cc1">TILE2</a>, &amp;hero, 0);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Draw the sprite. Notice that we must refer to it using</span></div>
<div class="line"><span class="comment">// texture coordinates (0,0).</span></div>
<div class="line"><a class="code hl_define" href="rdpq__rect_8h.html#a7196362c567172a2012f414c8a412743">rdpq_texture_rectangle</a>(<a class="code hl_enumvalue" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931eadb7ac46392b285fc6cbac9404f189cc1">TILE2</a>,</div>
<div class="line">    pos_x, pos_y, pos_x+32, pos_y+32,   <span class="comment">// screen coordinates of the sprite</span></div>
<div class="line">    0, 0,                               <span class="comment">// texture coordinates</span></div>
<div class="line">    1.0, 1.0);                          <span class="comment">// texture increments (= no scaling)</span></div>
<div class="ttc" id="ardpq__tex_8c_html_aaa36de4024b0a12f37ddfc5544bcbfa4"><div class="ttname"><a href="rdpq__tex_8c.html#aaa36de4024b0a12f37ddfc5544bcbfa4">rdpq_tex_upload</a></div><div class="ttdeci">int rdpq_tex_upload(rdpq_tile_t tile, const surface_t *tex, const rdpq_texparms_t *parms)</div><div class="ttdoc">Load a texture into TMEM.</div><div class="ttdef"><b>Definition:</b> rdpq_tex.c:398</div></div>
<div class="ttc" id="asurface_8c_html_a201a14d89649b0f81ef8d535b724b34f"><div class="ttname"><a href="surface_8c.html#a201a14d89649b0f81ef8d535b724b34f">surface_make_sub</a></div><div class="ttdeci">surface_t surface_make_sub(surface_t *parent, uint16_t x0, uint16_t y0, uint16_t width, uint16_t height)</div><div class="ttdoc">Initialize a surface_t structure, pointing to a rectangular portion of another surface.</div><div class="ttdef"><b>Definition:</b> surface.c:57</div></div>
<div class="ttc" id="asurface_8h_html_structsurface__t"><div class="ttname"><a href="surface_8h.html#structsurface__t">surface_t</a></div><div class="ttdoc">A surface buffer for graphics.</div><div class="ttdef"><b>Definition:</b> surface.h:138</div></div>
</div><!-- fragment --><p >The only limit of this second solution is that the sub-surface pointer must be 8-byte aligned (like all RDP textures), so it can only be used if the rectangle that needs to be loaded respects such constraint as well.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tile</td><td>Tile descriptor that will be initialized with this texture </td></tr>
    <tr><td class="paramname">tex</td><td>Surface containing the texture to load </td></tr>
    <tr><td class="paramname">parms</td><td>All optional parameters on where to load the texture and how to sample it. Refer to <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t" title="Texture sampling parameters for rdpq_tex_upload.">rdpq_texparms_t</a> for more information. </td></tr>
    <tr><td class="paramname">s0</td><td>Top-left X coordinate of the rectangle to load </td></tr>
    <tr><td class="paramname">t0</td><td>Top-left Y coordinate of the rectangle to load </td></tr>
    <tr><td class="paramname">s1</td><td>Bottom-right <em>exclusive</em> X coordinate of the rectangle </td></tr>
    <tr><td class="paramname">t1</td><td>Bottom-right <em>exclusive</em> Y coordinate of the rectangle </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int Number of bytes used in TMEM for this texture</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__tex_8h.html#aaa36de4024b0a12f37ddfc5544bcbfa4" title="Load a texture into TMEM.">rdpq_tex_upload</a> </dd>
<dd>
<a class="el" href="surface_8h.html#a201a14d89649b0f81ef8d535b724b34f" title="Initialize a surface_t structure, pointing to a rectangular portion of another surface.">surface_make_sub</a> </dd></dl>

</div>
</div>
<a id="aaa36de4024b0a12f37ddfc5544bcbfa4" name="aaa36de4024b0a12f37ddfc5544bcbfa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa36de4024b0a12f37ddfc5544bcbfa4">&#9670;&nbsp;</a></span>rdpq_tex_upload()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdpq_tex_upload </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a>&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="surface_8h.html#structsurface__t">surface_t</a> *&#160;</td>
          <td class="paramname"><em>tex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t">rdpq_texparms_t</a> *&#160;</td>
          <td class="paramname"><em>parms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a texture into TMEM. </p>
<p >This function helps loading a texture into TMEM, which normally involves:</p>
<ul>
<li>Configuring a tile descriptor (via <a class="el" href="rdpq_8h.html#a3aa3f0ce08b370d70ff7dcc81efba69c" title="Enqueue a RDP SET_TILE command (full version)">rdpq_set_tile</a>)</li>
<li>Setting the source texture image (via <a class="el" href="rdpq_8h.html#a243f6adec109fcf042273b5e6402f83c" title="Configure the texture to use (RDP command: SET_TEX_IMAGE)">rdpq_set_texture_image</a>)</li>
<li>Loading the texture (via <a class="el" href="rdpq_8h.html#a7e7757331841702b18f3e3c90a91edc6" title="Load a portion of a texture into TMEM (RDP command: LOAD_TILE)">rdpq_load_tile</a> or <a class="el" href="rdpq_8h.html#a9b37267136cf8b04374eb3ac668046f2" title="Load a texture image into TMEM with a single contiguous memory transfer (RDP command: LOAD_BLOCK)">rdpq_load_block</a>)</li>
</ul>
<p >After calling this function, the specified tile descriptor will be ready to be used in drawing primitives like <a class="el" href="rdpq__tri_8c.html#afb11d915a7ce8903b2b3e5ed9ef7936e" title="Draw a triangle (RDP command: TRI_*)">rdpq_triangle</a> or <a class="el" href="rdpq__rect_8h.html#a7196362c567172a2012f414c8a412743" title="Draw a textured rectangle (RDP command: TEXTURE_RECTANGLE)">rdpq_texture_rectangle</a>.</p>
<p >If the texture uses a palette (<a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1a1d1f3cf5eb79947c79274c2a353e86aa" title="Format CI8: color index 8-bit (paletted, 1 index per byte)">FMT_CI8</a> or <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1ae7c884ef15b16d8bb1fe78d46aa209c4" title="Format CI4: color index 4-bit (paletted, 2 indices per byte)">FMT_CI4</a>), the tile descriptor will be by default pointing to palette 0. In the case of <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1ae7c884ef15b16d8bb1fe78d46aa209c4" title="Format CI4: color index 4-bit (paletted, 2 indices per byte)">FMT_CI4</a>, this might not be the correct palette; to specify a different palette number, add .palette = X to the tex parms. Before drawing a texture with palette, remember to call <a class="el" href="rdpq__mode_8h.html#aeb5d5cab3092397225bfc40fffd1ab7d" title="Activate palette lookup during drawing.">rdpq_mode_tlut</a> to activate palette mode.</p>
<p >If you want to load a portion of a texture rather than the full texture, use <a class="el" href="rdpq__tex_8h.html#a02d0ec8eab1907101928c226831e6af3" title="Load a portion of texture into TMEM.">rdpq_tex_upload_sub</a>, or alternatively create a sub-surface using <a class="el" href="surface_8h.html#a201a14d89649b0f81ef8d535b724b34f" title="Initialize a surface_t structure, pointing to a rectangular portion of another surface.">surface_make_sub</a> and pass it to <a class="el" href="rdpq__tex_8h.html#aaa36de4024b0a12f37ddfc5544bcbfa4" title="Load a texture into TMEM.">rdpq_tex_upload</a>. See <a class="el" href="rdpq__tex_8h.html#a02d0ec8eab1907101928c226831e6af3" title="Load a portion of texture into TMEM.">rdpq_tex_upload_sub</a> for an example of both techniques.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tile</td><td>Tile descriptor that will be initialized with this texture </td></tr>
    <tr><td class="paramname">tex</td><td>Surface containing the texture to load </td></tr>
    <tr><td class="paramname">parms</td><td>All optional parameters on where to load the texture and how to sample it. Refer to <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t" title="Texture sampling parameters for rdpq_tex_upload.">rdpq_texparms_t</a> for more information. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes used in TMEM for this texture</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__tex_8h.html#a02d0ec8eab1907101928c226831e6af3" title="Load a portion of texture into TMEM.">rdpq_tex_upload_sub</a> </dd>
<dd>
<a class="el" href="surface_8h.html#a201a14d89649b0f81ef8d535b724b34f" title="Initialize a surface_t structure, pointing to a rectangular portion of another surface.">surface_make_sub</a> </dd></dl>

</div>
</div>
<a id="a26a1b8180d070fa5c3c502b3a12fe3fe" name="a26a1b8180d070fa5c3c502b3a12fe3fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26a1b8180d070fa5c3c502b3a12fe3fe">&#9670;&nbsp;</a></span>rdpq_tex_reuse_sub()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdpq_tex_reuse_sub </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a>&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t">rdpq_texparms_t</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>s0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>t0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>s1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>t1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reuse a portion of the previously uploaded texture to TMEM. </p>
<p >When a texture has been uploaded, its possible to reuse it for multiple tiles without increasing TMEM usage. This function provides a way to achieve this while also configuring your own texture parameters for the reused texture.</p>
<p >This sub-variant also allows to specify what part of the uploaded texture must be reused. For example, after uploading a 64x64 texture (or a 64x64 sub texture of a larger surface), you can reuse an existing portion of it, like (16,16)-(48,48) or (0,0)-(8,32). Restrictions of <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t" title="Texture sampling parameters for rdpq_tex_upload.">rdpq_texparms_t</a> apply just when reusing just as well as for uploading a texture.</p>
<p >Sub-rectangle must be within the bounds of the texture reused and be 8-byte aligned, not all starting positions are valid for different formats.</p>
<p >Starting horizontal position s0 must be 8-byte aligned, meaning for different image formats you can use <a class="el" href="surface_8h.html#a3d266c460ce7974103858f37f8921c67" title="Convert the specified number of bytes to pixels.">TEX_FORMAT_BYTES2PIX(fmt, bytes)</a> with bytes being in multiples of 8. Starting vertical position t0 must be in multiples of 2 pixels due to TMEM arrangement.</p>
<p >Leaving parms to NULL will copy the previous' texture texparms. Note: This function must be executed in a multi-upload block right after the reused texture has been uploaded.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tile</td><td>Tile descriptor that will be initialized with reused texture </td></tr>
    <tr><td class="paramname">parms</td><td>All optional parameters on how to sample reused texture. Refer to <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t" title="Texture sampling parameters for rdpq_tex_upload.">rdpq_texparms_t</a> for more information. </td></tr>
    <tr><td class="paramname">s0</td><td>Top-left X coordinate of the rectangle to reuse </td></tr>
    <tr><td class="paramname">t0</td><td>Top-left Y coordinate of the rectangle to reuse </td></tr>
    <tr><td class="paramname">s1</td><td>Bottom-right <em>exclusive</em> X coordinate of the rectangle </td></tr>
    <tr><td class="paramname">t1</td><td>Bottom-right <em>exclusive</em> Y coordinate of the rectangle </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int Number of bytes used in TMEM for this texture (always 0) </dd></dl>

</div>
</div>
<a id="af514874c6ceb56dd3ba523c908599a6d" name="af514874c6ceb56dd3ba523c908599a6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af514874c6ceb56dd3ba523c908599a6d">&#9670;&nbsp;</a></span>rdpq_tex_reuse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdpq_tex_reuse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a>&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t">rdpq_texparms_t</a> *&#160;</td>
          <td class="paramname"><em>parms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reuse the previously uploaded texture to TMEM. </p>
<p >When a texture has been uploaded, its possible to reuse it for multiple tiles without increasing TMEM usage. This function provides a way to achieve this while also configuring your own texture parameters for the reused texture.</p>
<p >This full-variant will use the whole texture that was previously uploaded. Leaving parms to NULL will copy the previous' texture texparms.</p>
<p >Note: This function must be executed in a multi-upload block right after the reused texture has been uploaded.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tile</td><td>Tile descriptor that will be initialized with reused texture </td></tr>
    <tr><td class="paramname">parms</td><td>All optional parameters on how to sample reused texture. Refer to <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t" title="Texture sampling parameters for rdpq_tex_upload.">rdpq_texparms_t</a> for more information. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int Number of bytes used in TMEM for this texture (always 0) </dd></dl>

</div>
</div>
<a id="a3a74ebb71eafae1b357a40417916854c" name="a3a74ebb71eafae1b357a40417916854c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a74ebb71eafae1b357a40417916854c">&#9670;&nbsp;</a></span>rdpq_tex_blit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_tex_blit </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="surface_8h.html#structsurface__t">surface_t</a> *&#160;</td>
          <td class="paramname"><em>surf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>x0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>y0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rdpq__tex_8h.html#structrdpq__blitparms__t">rdpq_blitparms_t</a> *&#160;</td>
          <td class="paramname"><em>parms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Blit a surface to the active framebuffer. </p>
<p >This is the highest level function for drawing an arbitrary-sized surface to the screen, possibly scaling and rotating it.</p>
<p >It handles all the required steps to blit the entire contents of a surface to the framebuffer, that is:</p>
<ul>
<li>Logically split the surface in chunks that fit the TMEM</li>
<li>Calculate an appropriate scaling factor for each chunk</li>
<li>Load each chunk into TMEM (via <a class="el" href="rdpq__tex_8h.html#aaa36de4024b0a12f37ddfc5544bcbfa4" title="Load a texture into TMEM.">rdpq_tex_upload</a>)</li>
<li>Draw each chunk to the framebuffer (via <a class="el" href="rdpq__rect_8h.html#a7196362c567172a2012f414c8a412743" title="Draw a textured rectangle (RDP command: TEXTURE_RECTANGLE)">rdpq_texture_rectangle</a> or <a class="el" href="rdpq__tri_8c.html#afb11d915a7ce8903b2b3e5ed9ef7936e" title="Draw a triangle (RDP command: TRI_*)">rdpq_triangle</a>)</li>
</ul>
<p >Note that this function only performs the actual blits, it does not configure the rendering mode or handle palettes. Before calling this function, make sure to configure the render mode via <a class="el" href="rdpq__mode_8h.html#ac3c29578703de424bea9548ad86bb4af" title="Reset render mode to standard.">rdpq_set_mode_standard</a> (or <a class="el" href="rdpq__mode_8h.html#a8a821b9f3d3e6da106695290bebe1392" title="Reset render mode to COPY type.">rdpq_set_mode_copy</a> if no scaling and pixel format conversion is required). If the surface uses a palette, you also need to load the palette using <a class="el" href="rdpq__tex_8h.html#a30a8e20ae24686b902d5d572e158fbd6" title="Load one or more palettes into TMEM.">rdpq_tex_upload_tlut</a>.</p>
<p >This function is able to perform many different complex transformations. The implementation has been tuned to try to be as fast as possible for simple blits, but it scales up nicely for more complex operations.</p>
<p >The parameters that describe the transformations to perform are passed in the <code>parms</code> structure. The structure contains a lot of fields, but it has been designed so that most of them can be simply initalized to zero to disable advanced behaviors (and thus simply left unmentioned in an inline initialization).</p>
<p >For instance, this blits a large image to the screen, aligning it to the top-left corner (eg: a splashscreen).</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="rdpq__tex_8c.html#a3a74ebb71eafae1b357a40417916854c">rdpq_tex_blit</a>(splashscreen, 0, 0, NULL);</div>
<div class="ttc" id="ardpq__tex_8c_html_a3a74ebb71eafae1b357a40417916854c"><div class="ttname"><a href="rdpq__tex_8c.html#a3a74ebb71eafae1b357a40417916854c">rdpq_tex_blit</a></div><div class="ttdeci">void rdpq_tex_blit(const surface_t *surf, float x0, float y0, const rdpq_blitparms_t *parms)</div><div class="ttdoc">Blit a surface to the active framebuffer.</div><div class="ttdef"><b>Definition:</b> rdpq_tex.c:667</div></div>
</div><!-- fragment --><p >This is the same, but the image will be centered on the screen. To do this, we specify the center of the screen as position, and then we set the hotspost of the image ("cx" and "cy" fields) to its center:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="rdpq__tex_8c.html#a3a74ebb71eafae1b357a40417916854c">rdpq_tex_blit</a>(splashscreen, 320/2, 160/2, &amp;(<a class="code hl_struct" href="rdpq__tex_8h.html#structrdpq__blitparms__t">rdpq_blitparms_t</a>){</div>
<div class="line">    .cx = splashscreen-&gt;width / 2,</div>
<div class="line">    .cy = splashscreen-&gt;height / 2,</div>
<div class="line">});</div>
<div class="ttc" id="ardpq__tex_8h_html_structrdpq__blitparms__t"><div class="ttname"><a href="rdpq__tex_8h.html#structrdpq__blitparms__t">rdpq_blitparms_t</a></div><div class="ttdoc">Blitting parameters for rdpq_tex_blit.</div><div class="ttdef"><b>Definition:</b> rdpq_tex.h:300</div></div>
</div><!-- fragment --><p >This examples scales a 64x64 image to 256x256, putting its center near the top-left of the screen (so part of resulting image will be offscreen):</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="rdpq__tex_8c.html#a3a74ebb71eafae1b357a40417916854c">rdpq_tex_blit</a>(splashscreen, 20, 20, &amp;(<a class="code hl_struct" href="rdpq__tex_8h.html#structrdpq__blitparms__t">rdpq_blitparms_t</a>){</div>
<div class="line">    .cx = splashscreen-&gt;width / 2, .cy = splashscreen-&gt;height / 2,</div>
<div class="line">    .scale_x = 4.0f, .scale_y = 4.0f,</div>
<div class="line">});</div>
</div><!-- fragment --><p >This example assumes that the surface is a spritemap with frames of size 32x32. It selects the sprite at row 4, column 2, and draws it centered at position 100,100 on the screen applying a rotation of 45 degrees around its center:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="rdpq__tex_8c.html#a3a74ebb71eafae1b357a40417916854c">rdpq_tex_blit</a>(splashscreen, 100, 100, &amp;(<a class="code hl_struct" href="rdpq__tex_8h.html#structrdpq__blitparms__t">rdpq_blitparms_t</a>){</div>
<div class="line">     .s0 = 32*2, .t0 = 32*4,</div>
<div class="line">     .width = 32, .height = 32,</div>
<div class="line">     .cx = 16, .cy = 16,</div>
<div class="line">     .theta = M_PI/4,</div>
<div class="line">});</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">surf</td><td>Surface to draw </td></tr>
    <tr><td class="paramname">x0</td><td>X coordinate on the framebuffer where to draw the surface </td></tr>
    <tr><td class="paramname">y0</td><td>Y coordinate on the framebuffer where to draw the surface </td></tr>
    <tr><td class="paramname">parms</td><td>Parameters for the blit operation (or NULL for default) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a30a8e20ae24686b902d5d572e158fbd6" name="a30a8e20ae24686b902d5d572e158fbd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30a8e20ae24686b902d5d572e158fbd6">&#9670;&nbsp;</a></span>rdpq_tex_upload_tlut()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_tex_upload_tlut </td>
          <td>(</td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>tlut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>color_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_colors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load one or more palettes into TMEM. </p>
<p >This function allows to load one or more palettes into TMEM.</p>
<p >When using palettes, the upper half of TMEM is allocated to them. There is room for 256 colors in total, which allows for one palette for a CI8 texture, or up to 16 palettes for CI4 textures.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tlut</td><td>Pointer to the color entries to load </td></tr>
    <tr><td class="paramname">color_idx</td><td>First color entry in TMEM that will be written to (0-255) </td></tr>
    <tr><td class="paramname">num_colors</td><td>Number of color entries to load (1-256) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac11f8d4ea6150c99080d1e4db70542eb" name="ac11f8d4ea6150c99080d1e4db70542eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac11f8d4ea6150c99080d1e4db70542eb">&#9670;&nbsp;</a></span>rdpq_tex_multi_begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_tex_multi_begin </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Begin a multi-texture upload. </p>
<p >This function begins a multi-texture upload, with automatic TMEM layout. There are two main cases where you may want to squeeze multiple textures within TMEM: when loading mipmaps, and when using multi-texturing.</p>
<p >After calling <a class="el" href="rdpq__tex_8h.html#ac11f8d4ea6150c99080d1e4db70542eb" title="Begin a multi-texture upload.">rdpq_tex_multi_begin</a>, you can call <a class="el" href="rdpq__tex_8h.html#aaa36de4024b0a12f37ddfc5544bcbfa4" title="Load a texture into TMEM.">rdpq_tex_upload</a> multiple times in sequence, without manually specifying a TMEM address. The functions will start filling TMEM from the beginning, in sequence.</p>
<p >If the TMEM becomes full and is unable to fullfil a load, an assertion will be issued.</p>
<dl class="section note"><dt>Note</dt><dd>When calling <a class="el" href="rdpq__tex_8h.html#aaa36de4024b0a12f37ddfc5544bcbfa4" title="Load a texture into TMEM.">rdpq_tex_upload</a> or <a class="el" href="rdpq__tex_8h.html#a02d0ec8eab1907101928c226831e6af3" title="Load a portion of texture into TMEM.">rdpq_tex_upload_sub</a> in this mode, do not specify a TMEM address in the parms structure, as the actual address is automatically calculated.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__tex_8h.html#aaa36de4024b0a12f37ddfc5544bcbfa4" title="Load a texture into TMEM.">rdpq_tex_upload</a> </dd>
<dd>
<a class="el" href="rdpq__tex_8h.html#a02d0ec8eab1907101928c226831e6af3" title="Load a portion of texture into TMEM.">rdpq_tex_upload_sub</a> </dd>
<dd>
<a class="el" href="rdpq__tex_8h.html#a5767fbc372c1bfc589371b974177491b" title="Finish a multi-texture upload.">rdpq_tex_multi_end</a> </dd></dl>

</div>
</div>
<a id="a5767fbc372c1bfc589371b974177491b" name="a5767fbc372c1bfc589371b974177491b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5767fbc372c1bfc589371b974177491b">&#9670;&nbsp;</a></span>rdpq_tex_multi_end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdpq_tex_multi_end </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finish a multi-texture upload. </p>
<p >This function finishes a multi-texture upload. See <a class="el" href="rdpq__tex_8h.html#ac11f8d4ea6150c99080d1e4db70542eb" title="Begin a multi-texture upload.">rdpq_tex_multi_begin</a> for more information.</p>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes used in TMEM for this multi-texture upload</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__tex_8h.html#ac11f8d4ea6150c99080d1e4db70542eb" title="Begin a multi-texture upload.">rdpq_tex_multi_begin</a>. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 5 2024 19:06:52 for libdragon by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
