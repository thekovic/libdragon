<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdragon: dragonfs.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo2.png"/></td>
  <td id="projectalign">
   <div id="projectname">libdragon
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">dragonfs.c File Reference<div class="ingroups"><a class="el" href="group__libdragon.html">libdragon</a> &raquo; <a class="el" href="group__asset.html">Asset Subsystem</a> &raquo; <a class="el" href="group__dfs.html">DragonFS</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>DragonFS.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9ee63404c5bfea0014f8d9eb774f3932"><td class="memItemLeft" align="right" valign="top"><a id="a9ee63404c5bfea0014f8d9eb774f3932" name="a9ee63404c5bfea0014f8d9eb774f3932"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>OPENFILE_TO_HANDLE</b>(file)&#160;&#160;&#160;((int)<a class="el" href="group__n64sys.html#ga54fca3c0f8e1be138f320b3dcce4366f">PhysicalAddr</a>(file))</td></tr>
<tr class="memdesc:a9ee63404c5bfea0014f8d9eb774f3932"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert an open file pointer to a handle. <br /></td></tr>
<tr class="separator:a9ee63404c5bfea0014f8d9eb774f3932"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab03bdffe1803ebcbb8f563a6408b1d3d"><td class="memItemLeft" align="right" valign="top"><a id="ab03bdffe1803ebcbb8f563a6408b1d3d" name="ab03bdffe1803ebcbb8f563a6408b1d3d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>HANDLE_TO_OPENFILE</b>(handle)&#160;&#160;&#160;((<a class="el" href="group__dfs.html#structdfs__open__file__t">dfs_open_file_t</a>*)((uint32_t)(handle) | 0x80000000))</td></tr>
<tr class="memdesc:ab03bdffe1803ebcbb8f563a6408b1d3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a handle to an open file pointer. <br /></td></tr>
<tr class="separator:ab03bdffe1803ebcbb8f563a6408b1d3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a99fb83031ce9923c84392b4e92f956b5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="dragonfs_8c.html#a99fb83031ce9923c84392b4e92f956b5aa30e5e88c091325c9384d853412526f7">WALK_CHDIR</a>
, <a class="el" href="dragonfs_8c.html#a99fb83031ce9923c84392b4e92f956b5a15241e0f0717e074c00737e79e411351">WALK_OPEN</a>
 }</td></tr>
<tr class="memdesc:a99fb83031ce9923c84392b4e92f956b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Directory walking flags.  <a href="dragonfs_8c.html#a99fb83031ce9923c84392b4e92f956b5">More...</a><br /></td></tr>
<tr class="separator:a99fb83031ce9923c84392b4e92f956b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc6126af1d45847bc59afa0aa3216b04"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="dragonfs_8c.html#abc6126af1d45847bc59afa0aa3216b04af173f42b16daa16262e56c2e12fb11b3">TYPE_ANY</a>
, <a class="el" href="dragonfs_8c.html#abc6126af1d45847bc59afa0aa3216b04a30351c278162a6e7dbdb10570ae8782e">TYPE_FILE</a>
, <a class="el" href="dragonfs_8c.html#abc6126af1d45847bc59afa0aa3216b04a5b5f3036729530d8011e6f1ea2207aac">TYPE_DIR</a>
 }</td></tr>
<tr class="memdesc:abc6126af1d45847bc59afa0aa3216b04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Directory walking return flags.  <a href="dragonfs_8c.html#abc6126af1d45847bc59afa0aa3216b04">More...</a><br /></td></tr>
<tr class="separator:abc6126af1d45847bc59afa0aa3216b04"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4acea40a2214dee556c7491e5c24e0dc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dragonfs_8c.html#a4acea40a2214dee556c7491e5c24e0dc">dfs_chdir</a> (const char *const path)</td></tr>
<tr class="memdesc:a4acea40a2214dee556c7491e5c24e0dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change directories to the specified path. <br  />
  <a href="dragonfs_8c.html#a4acea40a2214dee556c7491e5c24e0dc">More...</a><br /></td></tr>
<tr class="separator:a4acea40a2214dee556c7491e5c24e0dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33dacb81cbf0f03a8588ffa8d9ee86ac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dragonfs_8c.html#a33dacb81cbf0f03a8588ffa8d9ee86ac">dfs_dir_findfirst</a> (const char *const path, char *buf)</td></tr>
<tr class="memdesc:a33dacb81cbf0f03a8588ffa8d9ee86ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the first file or directory in a directory listing.  <a href="dragonfs_8c.html#a33dacb81cbf0f03a8588ffa8d9ee86ac">More...</a><br /></td></tr>
<tr class="separator:a33dacb81cbf0f03a8588ffa8d9ee86ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf2eb04e1d1e8e9ed8733b88e41dc7e3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dragonfs_8c.html#aaf2eb04e1d1e8e9ed8733b88e41dc7e3">dfs_dir_findnext</a> (char *buf)</td></tr>
<tr class="memdesc:aaf2eb04e1d1e8e9ed8733b88e41dc7e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the next file or directory in a directory listing.  <a href="dragonfs_8c.html#aaf2eb04e1d1e8e9ed8733b88e41dc7e3">More...</a><br /></td></tr>
<tr class="separator:aaf2eb04e1d1e8e9ed8733b88e41dc7e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b32978567d57be77b43b6ce537cf620"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dragonfs_8c.html#a5b32978567d57be77b43b6ce537cf620">dfs_open</a> (const char *const path)</td></tr>
<tr class="memdesc:a5b32978567d57be77b43b6ce537cf620"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a file given a path.  <a href="dragonfs_8c.html#a5b32978567d57be77b43b6ce537cf620">More...</a><br /></td></tr>
<tr class="separator:a5b32978567d57be77b43b6ce537cf620"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac645811e9856f35930238d945dc48e9f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dragonfs_8c.html#ac645811e9856f35930238d945dc48e9f">dfs_close</a> (uint32_t handle)</td></tr>
<tr class="memdesc:ac645811e9856f35930238d945dc48e9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close an already open file handle.  <a href="dragonfs_8c.html#ac645811e9856f35930238d945dc48e9f">More...</a><br /></td></tr>
<tr class="separator:ac645811e9856f35930238d945dc48e9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11e474fe0dcd37e0061ad6853c7f996d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dragonfs_8c.html#a11e474fe0dcd37e0061ad6853c7f996d">dfs_seek</a> (uint32_t handle, int offset, int origin)</td></tr>
<tr class="memdesc:a11e474fe0dcd37e0061ad6853c7f996d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seek to an offset in the file.  <a href="dragonfs_8c.html#a11e474fe0dcd37e0061ad6853c7f996d">More...</a><br /></td></tr>
<tr class="separator:a11e474fe0dcd37e0061ad6853c7f996d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3350daf670c94a8ea241bafe2c9b6b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dragonfs_8c.html#ab3350daf670c94a8ea241bafe2c9b6b5">dfs_tell</a> (uint32_t handle)</td></tr>
<tr class="memdesc:ab3350daf670c94a8ea241bafe2c9b6b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current offset into a file.  <a href="dragonfs_8c.html#ab3350daf670c94a8ea241bafe2c9b6b5">More...</a><br /></td></tr>
<tr class="separator:ab3350daf670c94a8ea241bafe2c9b6b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c0acaa1af10520da638633ab73b9287"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dragonfs_8c.html#a7c0acaa1af10520da638633ab73b9287">dfs_read</a> (void *const buf, int size, int count, uint32_t handle)</td></tr>
<tr class="memdesc:a7c0acaa1af10520da638633ab73b9287"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from a file.  <a href="dragonfs_8c.html#a7c0acaa1af10520da638633ab73b9287">More...</a><br /></td></tr>
<tr class="separator:a7c0acaa1af10520da638633ab73b9287"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16adfb1647241b51f362517c3992f05e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dragonfs_8c.html#a16adfb1647241b51f362517c3992f05e">dfs_size</a> (uint32_t handle)</td></tr>
<tr class="memdesc:a16adfb1647241b51f362517c3992f05e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the file size of an open file.  <a href="dragonfs_8c.html#a16adfb1647241b51f362517c3992f05e">More...</a><br /></td></tr>
<tr class="separator:a16adfb1647241b51f362517c3992f05e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b526624aebcf3d93a825edeb1ae4e63"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dragonfs_8c.html#a8b526624aebcf3d93a825edeb1ae4e63">dfs_rom_addr</a> (const char *path)</td></tr>
<tr class="memdesc:a8b526624aebcf3d93a825edeb1ae4e63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the physical address of a file (in ROM space)  <a href="dragonfs_8c.html#a8b526624aebcf3d93a825edeb1ae4e63">More...</a><br /></td></tr>
<tr class="separator:a8b526624aebcf3d93a825edeb1ae4e63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af21f4f45f32308ee7769f71224a10616"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dragonfs_8c.html#af21f4f45f32308ee7769f71224a10616">dfs_eof</a> (uint32_t handle)</td></tr>
<tr class="memdesc:af21f4f45f32308ee7769f71224a10616"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return whether the end of file has been reached.  <a href="dragonfs_8c.html#af21f4f45f32308ee7769f71224a10616">More...</a><br /></td></tr>
<tr class="separator:af21f4f45f32308ee7769f71224a10616"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ca0762367965bd8a6dbbe07b7ad3022"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dragonfs_8c.html#a7ca0762367965bd8a6dbbe07b7ad3022">dfs_init</a> (uint32_t base_fs_loc)</td></tr>
<tr class="memdesc:a7ca0762367965bd8a6dbbe07b7ad3022"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the filesystem.  <a href="dragonfs_8c.html#a7ca0762367965bd8a6dbbe07b7ad3022">More...</a><br /></td></tr>
<tr class="separator:a7ca0762367965bd8a6dbbe07b7ad3022"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab45d1919e34900b565922ca14b12088d"><td class="memItemLeft" align="right" valign="top"><a id="ab45d1919e34900b565922ca14b12088d" name="ab45d1919e34900b565922ca14b12088d"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>dfs_strerror</b> (int error)</td></tr>
<tr class="memdesc:ab45d1919e34900b565922ca14b12088d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert DFS error code into an error string. <br /></td></tr>
<tr class="separator:ab45d1919e34900b565922ca14b12088d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >DragonFS. </p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a99fb83031ce9923c84392b4e92f956b5" name="a99fb83031ce9923c84392b4e92f956b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99fb83031ce9923c84392b4e92f956b5">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Directory walking flags. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a99fb83031ce9923c84392b4e92f956b5aa30e5e88c091325c9384d853412526f7" name="a99fb83031ce9923c84392b4e92f956b5aa30e5e88c091325c9384d853412526f7"></a>WALK_CHDIR&#160;</td><td class="fielddoc"><p >Walk the directory structure for the purpose of changing directories. </p>
</td></tr>
<tr><td class="fieldname"><a id="a99fb83031ce9923c84392b4e92f956b5a15241e0f0717e074c00737e79e411351" name="a99fb83031ce9923c84392b4e92f956b5a15241e0f0717e074c00737e79e411351"></a>WALK_OPEN&#160;</td><td class="fielddoc"><p >Walk the directory structure for the purpose of opening a file or directory. </p>
</td></tr>
</table>

</div>
</div>
<a id="abc6126af1d45847bc59afa0aa3216b04" name="abc6126af1d45847bc59afa0aa3216b04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc6126af1d45847bc59afa0aa3216b04">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Directory walking return flags. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="abc6126af1d45847bc59afa0aa3216b04af173f42b16daa16262e56c2e12fb11b3" name="abc6126af1d45847bc59afa0aa3216b04af173f42b16daa16262e56c2e12fb11b3"></a>TYPE_ANY&#160;</td><td class="fielddoc"><p >Return any file or directory found. </p>
</td></tr>
<tr><td class="fieldname"><a id="abc6126af1d45847bc59afa0aa3216b04a30351c278162a6e7dbdb10570ae8782e" name="abc6126af1d45847bc59afa0aa3216b04a30351c278162a6e7dbdb10570ae8782e"></a>TYPE_FILE&#160;</td><td class="fielddoc"><p >Return a file from directory walk. </p>
</td></tr>
<tr><td class="fieldname"><a id="abc6126af1d45847bc59afa0aa3216b04a5b5f3036729530d8011e6f1ea2207aac" name="abc6126af1d45847bc59afa0aa3216b04a5b5f3036729530d8011e6f1ea2207aac"></a>TYPE_DIR&#160;</td><td class="fielddoc"><p >Return a directory from a directory walk. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4acea40a2214dee556c7491e5c24e0dc" name="a4acea40a2214dee556c7491e5c24e0dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4acea40a2214dee556c7491e5c24e0dc">&#9670;&nbsp;</a></span>dfs_chdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_chdir </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change directories to the specified path. <br  />
 </p>
<p >Supports absolute and relative</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>Relative or absolute path to change directories to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DFS_ESUCCESS on success or a negative value on error. </dd></dl>

</div>
</div>
<a id="a33dacb81cbf0f03a8588ffa8d9ee86ac" name="a33dacb81cbf0f03a8588ffa8d9ee86ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33dacb81cbf0f03a8588ffa8d9ee86ac">&#9670;&nbsp;</a></span>dfs_dir_findfirst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_dir_findfirst </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the first file or directory in a directory listing. </p>
<p >Supports absolute and relative. If the path is invalid, returns a negative DFS_errno. If a file or directory is found, returns the flags of the entry and copies the name into buf.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>The path to look for files in </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>Buffer to place the name of the file or directory found</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The flags (<a class="el" href="group__dfs.html#ga40f46638c929774a7c8867451487239f" title="This is a file entry.">FLAGS_FILE</a>, <a class="el" href="group__dfs.html#ga72132c67f7a158fce46a1113c0b0e7eb" title="This is a directory entry.">FLAGS_DIR</a>, <a class="el" href="group__dfs.html#ga4b6222e558984bbd372129daf4d0f6ee" title="This is the end of a directory list.">FLAGS_EOF</a>) or a negative value on error. </dd></dl>

</div>
</div>
<a id="aaf2eb04e1d1e8e9ed8733b88e41dc7e3" name="aaf2eb04e1d1e8e9ed8733b88e41dc7e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf2eb04e1d1e8e9ed8733b88e41dc7e3">&#9670;&nbsp;</a></span>dfs_dir_findnext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_dir_findnext </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the next file or directory in a directory listing. </p>
<dl class="section note"><dt>Note</dt><dd>Should be called after doing a <a class="el" href="dragonfs_8h.html#a33dacb81cbf0f03a8588ffa8d9ee86ac" title="Find the first file or directory in a directory listing.">dfs_dir_findfirst</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>Buffer to place the name of the next file or directory found</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The flags (<a class="el" href="group__dfs.html#ga40f46638c929774a7c8867451487239f" title="This is a file entry.">FLAGS_FILE</a>, <a class="el" href="group__dfs.html#ga72132c67f7a158fce46a1113c0b0e7eb" title="This is a directory entry.">FLAGS_DIR</a>, <a class="el" href="group__dfs.html#ga4b6222e558984bbd372129daf4d0f6ee" title="This is the end of a directory list.">FLAGS_EOF</a>) or a negative value on error. </dd></dl>

</div>
</div>
<a id="a5b32978567d57be77b43b6ce537cf620" name="a5b32978567d57be77b43b6ce537cf620"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b32978567d57be77b43b6ce537cf620">&#9670;&nbsp;</a></span>dfs_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_open </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a file given a path. </p>
<p >Check if we have any free file handles, and if we do, try to open the file specified. Supports absolute and relative paths</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>Path of the file to open</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A valid file handle to reference the file by or a negative error on failure. </dd></dl>

</div>
</div>
<a id="ac645811e9856f35930238d945dc48e9f" name="ac645811e9856f35930238d945dc48e9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac645811e9856f35930238d945dc48e9f">&#9670;&nbsp;</a></span>dfs_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_close </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close an already open file handle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>A valid file handle as returned from <a class="el" href="dragonfs_8c.html#a5b32978567d57be77b43b6ce537cf620" title="Open a file given a path.">dfs_open</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DFS_ESUCCESS on success or a negative value on error. </dd></dl>

</div>
</div>
<a id="a11e474fe0dcd37e0061ad6853c7f996d" name="a11e474fe0dcd37e0061ad6853c7f996d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11e474fe0dcd37e0061ad6853c7f996d">&#9670;&nbsp;</a></span>dfs_seek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_seek </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>origin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Seek to an offset in the file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>A valid file handle as returned from <a class="el" href="dragonfs_8c.html#a5b32978567d57be77b43b6ce537cf620" title="Open a file given a path.">dfs_open</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>A byte offset from the origin to seek from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">origin</td><td>An offset to seek from. Either <code>SEEK_SET</code>, <code>SEEK_CUR</code> or <code>SEEK_END</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DFS_ESUCCESS on success or a negative value on error. </dd></dl>

</div>
</div>
<a id="ab3350daf670c94a8ea241bafe2c9b6b5" name="ab3350daf670c94a8ea241bafe2c9b6b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3350daf670c94a8ea241bafe2c9b6b5">&#9670;&nbsp;</a></span>dfs_tell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_tell </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the current offset into a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>A valid file handle as returned from <a class="el" href="dragonfs_8c.html#a5b32978567d57be77b43b6ce537cf620" title="Open a file given a path.">dfs_open</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current byte offset into a file or a negative error on failure. </dd></dl>

</div>
</div>
<a id="a7c0acaa1af10520da638633ab73b9287" name="a7c0acaa1af10520da638633ab73b9287"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c0acaa1af10520da638633ab73b9287">&#9670;&nbsp;</a></span>dfs_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_read </td>
          <td>(</td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read data from a file. </p>
<p >Note that no caching is performed: if you need to read small amounts (eg: one byte at a time), consider using standard C API instead (fopen()) which performs internal buffering to avoid too much overhead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>Buffer to read into </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of each element to read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>Number of elements to read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>A valid file handle as returned from <a class="el" href="dragonfs_8c.html#a5b32978567d57be77b43b6ce537cf620" title="Open a file given a path.">dfs_open</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The actual number of bytes read or a negative value on failure. </dd></dl>

</div>
</div>
<a id="a16adfb1647241b51f362517c3992f05e" name="a16adfb1647241b51f362517c3992f05e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16adfb1647241b51f362517c3992f05e">&#9670;&nbsp;</a></span>dfs_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_size </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the file size of an open file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>A valid file handle as returned from <a class="el" href="dragonfs_8c.html#a5b32978567d57be77b43b6ce537cf620" title="Open a file given a path.">dfs_open</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The file size in bytes or a negative value on failure. </dd></dl>

</div>
</div>
<a id="a8b526624aebcf3d93a825edeb1ae4e63" name="a8b526624aebcf3d93a825edeb1ae4e63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b526624aebcf3d93a825edeb1ae4e63">&#9670;&nbsp;</a></span>dfs_rom_addr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t dfs_rom_addr </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the physical address of a file (in ROM space) </p>
<p >This function should be used for highly-specialized, high-performance use cases. Using dfs_open / dfs_read is generally acceptable performance-wise, and is easier to use rather than managing direct access to PI space.</p>
<p >Direct access to ROM data must go through io_read or dma_read. Do not dereference directly as the console might hang if the PI is busy.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>Name of the file</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the physical address of the file body, or 0 if the file was not found. </dd></dl>

</div>
</div>
<a id="af21f4f45f32308ee7769f71224a10616" name="af21f4f45f32308ee7769f71224a10616"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af21f4f45f32308ee7769f71224a10616">&#9670;&nbsp;</a></span>dfs_eof()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_eof </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return whether the end of file has been reached. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>A valid file handle as returned from <a class="el" href="dragonfs_8c.html#a5b32978567d57be77b43b6ce537cf620" title="Open a file given a path.">dfs_open</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if the end of file is reached, 0 if not, and a negative value on error. </dd></dl>

</div>
</div>
<a id="a7ca0762367965bd8a6dbbe07b7ad3022" name="a7ca0762367965bd8a6dbbe07b7ad3022"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ca0762367965bd8a6dbbe07b7ad3022">&#9670;&nbsp;</a></span>dfs_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_init </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>base_fs_loc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the filesystem. </p>
<p >Given a base offset where the filesystem should be found, this function will initialize the filesystem to read from cartridge space. This function will also register DragonFS with newlib so that standard POSIX/C file operations work with DragonFS, using the "rom:/" prefix".</p>
<p >The function needs to know where the DFS image is located within the cartridge space. To simplify this, you can pass <a class="el" href="group__dfs.html#ga1d81e04e879a844f4d733a3982bf85ee" title="Default filesystem location.">DFS_DEFAULT_LOCATION</a> which tells <a class="el" href="dragonfs_8h.html#a7ca0762367965bd8a6dbbe07b7ad3022" title="Initialize the filesystem.">dfs_init</a> to search for the DFS image by itself, using the rompak TOC (see <a class="el" href="rompak__internal_8h.html" title="ROM bundle support.">rompak_internal.h</a>). Most users should use this option.</p>
<p >Otherwise, if the ROM cannot be built with a rompak TOC for some reason, a virtual address should be passed. This is normally 0xB0000000 + the offset used when building your ROM + the size of the header file used (typically 0x1000).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">base_fs_loc</td><td>Virtual address in cartridge space at which to find the filesystem, or DFS_DEFAULT_LOCATION to automatically search for the filesystem in the cartridge (using the rompak).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DFS_ESUCCESS on success or a negative error otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
