<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdragon: rdpq_debug.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libdragon
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">rdpq_debug.h File Reference<div class="ingroups"><a class="el" href="group__libdragon.html">libdragon</a> &raquo; <a class="el" href="group__display.html">Display Subsystem</a> &raquo; <a class="el" href="group__rdp.html">(Deprecated) Old RDP library</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>RDP Command queue: debugging helpers.  
<a href="#details">More...</a></p>

<p><a href="rdpq__debug_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a55c7e558e4673c0d498a6dc2be1c0792"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__debug_8h.html#a55c7e558e4673c0d498a6dc2be1c0792">rdpq_debug_start</a> (void)</td></tr>
<tr class="memdesc:a55c7e558e4673c0d498a6dc2be1c0792"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the RDPQ debugging engine.  <a href="rdpq__debug_8h.html#a55c7e558e4673c0d498a6dc2be1c0792">More...</a><br /></td></tr>
<tr class="separator:a55c7e558e4673c0d498a6dc2be1c0792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bf776a5e0630cc294376951f67cc8f9"><td class="memItemLeft" align="right" valign="top"><a id="a5bf776a5e0630cc294376951f67cc8f9" name="a5bf776a5e0630cc294376951f67cc8f9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>rdpq_debug_stop</b> (void)</td></tr>
<tr class="memdesc:a5bf776a5e0630cc294376951f67cc8f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the rdpq debugging engine. <br /></td></tr>
<tr class="separator:a5bf776a5e0630cc294376951f67cc8f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a803828ee30e0abcd321e5dbc362e7d0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__debug_8h.html#a803828ee30e0abcd321e5dbc362e7d0d">rdpq_debug_log</a> (bool show_log)</td></tr>
<tr class="memdesc:a803828ee30e0abcd321e5dbc362e7d0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Show a full log of all the RDP commands.  <a href="rdpq__debug_8h.html#a803828ee30e0abcd321e5dbc362e7d0d">More...</a><br /></td></tr>
<tr class="separator:a803828ee30e0abcd321e5dbc362e7d0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3a06bc5bb62b56379694e97ebe7ac4e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__debug_8h.html#af3a06bc5bb62b56379694e97ebe7ac4e">rdpq_debug_log_msg</a> (const char *str)</td></tr>
<tr class="memdesc:af3a06bc5bb62b56379694e97ebe7ac4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a custom message in the RDP logging.  <a href="rdpq__debug_8h.html#af3a06bc5bb62b56379694e97ebe7ac4e">More...</a><br /></td></tr>
<tr class="separator:af3a06bc5bb62b56379694e97ebe7ac4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a847e4cd157797e887fb1d5d2cf611b10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="surface_8h.html#structsurface__t">surface_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__debug_8h.html#a847e4cd157797e887fb1d5d2cf611b10">rdpq_debug_get_tmem</a> (void)</td></tr>
<tr class="memdesc:a847e4cd157797e887fb1d5d2cf611b10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire a dump of the current contents of TMEM.  <a href="rdpq__debug_8h.html#a847e4cd157797e887fb1d5d2cf611b10">More...</a><br /></td></tr>
<tr class="separator:a847e4cd157797e887fb1d5d2cf611b10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b6e04df491c2d55cba5b622e9404b02"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__debug_8h.html#a1b6e04df491c2d55cba5b622e9404b02">rdpq_debug_install_hook</a> (void(*hook)(void *ctx, uint64_t *cmd, int cmd_size), void *ctx)</td></tr>
<tr class="memdesc:a1b6e04df491c2d55cba5b622e9404b02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Install a custom hook that will be called every time a RDP command is processed.  <a href="rdpq__debug_8h.html#a1b6e04df491c2d55cba5b622e9404b02">More...</a><br /></td></tr>
<tr class="separator:a1b6e04df491c2d55cba5b622e9404b02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0a2e1e0864533b9e2068e9af66ecd3b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__debug_8h.html#af0a2e1e0864533b9e2068e9af66ecd3b">rdpq_debug_disasm</a> (uint64_t *buf, FILE *out)</td></tr>
<tr class="memdesc:af0a2e1e0864533b9e2068e9af66ecd3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disassemble a RDP command.  <a href="rdpq__debug_8h.html#af0a2e1e0864533b9e2068e9af66ecd3b">More...</a><br /></td></tr>
<tr class="separator:af0a2e1e0864533b9e2068e9af66ecd3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a8bc37e59c31488db705e0adf791c35"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq__debug_8h.html#a3a8bc37e59c31488db705e0adf791c35">rdpq_debug_disasm_size</a> (uint64_t *buf)</td></tr>
<tr class="memdesc:a3a8bc37e59c31488db705e0adf791c35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the size of the next RDP commands.  <a href="rdpq__debug_8h.html#a3a8bc37e59c31488db705e0adf791c35">More...</a><br /></td></tr>
<tr class="separator:a3a8bc37e59c31488db705e0adf791c35"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >RDP Command queue: debugging helpers. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a55c7e558e4673c0d498a6dc2be1c0792" name="a55c7e558e4673c0d498a6dc2be1c0792"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55c7e558e4673c0d498a6dc2be1c0792">&#9670;&nbsp;</a></span>rdpq_debug_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_debug_start </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the RDPQ debugging engine. </p>
<p >This function initializes the RDP debugging engine. After calling this function, all RDP commands sent via the rspq/rdpq libraries and overlays will be analyzed and validated, providing insights in case of programming errors that trigger hardware undefined behaviors or corrupt graphics. The validation errors and warnings are emitted via <a class="el" href="debug_8h.html#aa3e8be416ef1525cfd3230204b56d184" title="Write a message to the debugging channel.">debugf</a>, so make sure to initialize the debugging library to see it.</p>
<p >This is especially important with RDP because the chips is very hard to program correctly, and it is common to do mistakes. While rdpq tries to shield the programmer from most common mistakes via the fixups, it is still possible to do mistakes (eg: creating non-working color combiners) that the debugging engine can help spotting.</p>
<p >Notice that the validator needs to maintain a representation of the RDP state, as it is not possible to query the RDP about it. So it is better to call <a class="el" href="rdpq__debug_8h.html#a55c7e558e4673c0d498a6dc2be1c0792" title="Initialize the RDPQ debugging engine.">rdpq_debug_start</a> immediately after <a class="el" href="rdpq_8h.html#a568b75da730c69457404cf6dd0c1da15" title="Initialize the RDPQ library.">rdpq_init</a> when required, so that it can track all commands from the start. Otherwise, some spurious validation error could be emitted.</p>
<dl class="section note"><dt>Note</dt><dd>The validator does cause a measurable overhead. It is advised to enable it only in debugging builds. </dd></dl>

</div>
</div>
<a id="a803828ee30e0abcd321e5dbc362e7d0d" name="a803828ee30e0abcd321e5dbc362e7d0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a803828ee30e0abcd321e5dbc362e7d0d">&#9670;&nbsp;</a></span>rdpq_debug_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_debug_log </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>show_log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Show a full log of all the RDP commands. </p>
<p >This function configures the debugging engine to also log all RDP commands to the debugging channel (via <a class="el" href="debug_8h.html#aa3e8be416ef1525cfd3230204b56d184" title="Write a message to the debugging channel.">debugf</a>). This is extremely verbose and should be used sparingly to debug specific issues.</p>
<p >This function does enqueue a command in the rspq queue, so it is executed in order with respect to all rspq/rdpq commands. You can thus delimit specific portions of your code with <code>rdpq_debug_log(true)</code> / <code>rdpq_debug_log(false)</code>, to see only the RDP log produced by those code lines.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">show_log</td><td>true/false to enable/disable the RDP log. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af3a06bc5bb62b56379694e97ebe7ac4e" name="af3a06bc5bb62b56379694e97ebe7ac4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3a06bc5bb62b56379694e97ebe7ac4e">&#9670;&nbsp;</a></span>rdpq_debug_log_msg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_debug_log_msg </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a custom message in the RDP logging. </p>
<p >If the debug log is active, this function adds a custom message to the log. It can be useful to annotate different portions of the disassembly.</p>
<p >For instance, the following code:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="rdpq__debug_8h.html#a803828ee30e0abcd321e5dbc362e7d0d">rdpq_debug_log</a>(<span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="rdpq__debug_8h.html#af3a06bc5bb62b56379694e97ebe7ac4e">rdpq_debug_log_msg</a>(<span class="stringliteral">&quot;Black rectangle&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="rdpq__mode_8c.html#a99c5c398b388f6d1683e7405a6058fb9">rdpq_set_mode_fill</a>(<a class="code hl_define" href="group__graphics.html#gae16bab5741f411ec4ef51b0295f6e705">RGBA32</a>(0,0,0,0));</div>
<div class="line"><a class="code hl_define" href="rdpq__rect_8h.html#a9c6405f89d2fe70046330964c21ba124">rdpq_fill_rectangle</a>(0, 0, 320, 120);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="rdpq__debug_8h.html#af3a06bc5bb62b56379694e97ebe7ac4e">rdpq_debug_log_msg</a>(<span class="stringliteral">&quot;Red rectangle&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="rdpq_8c.html#a70a6556d7d088ca2b745fa145e3aeee3">rdpq_set_fill_color</a>(<a class="code hl_define" href="group__graphics.html#gae16bab5741f411ec4ef51b0295f6e705">RGBA32</a>(255,0,0,0));</div>
<div class="line"><a class="code hl_define" href="rdpq__rect_8h.html#a9c6405f89d2fe70046330964c21ba124">rdpq_fill_rectangle</a>(0, 120, 320, 240);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="rdpq__debug_8h.html#a803828ee30e0abcd321e5dbc362e7d0d">rdpq_debug_log</a>(<span class="keyword">false</span>);</div>
<div class="ttc" id="agroup__graphics_html_gae16bab5741f411ec4ef51b0295f6e705"><div class="ttname"><a href="group__graphics.html#gae16bab5741f411ec4ef51b0295f6e705">RGBA32</a></div><div class="ttdeci">#define RGBA32(rx, gx, bx, ax)</div><div class="ttdoc">Create a color_t from the R,G,B,A components in the RGBA32 range (0-255).</div><div class="ttdef"><b>Definition:</b> graphics.h:49</div></div>
<div class="ttc" id="ardpq_8c_html_a70a6556d7d088ca2b745fa145e3aeee3"><div class="ttname"><a href="rdpq_8c.html#a70a6556d7d088ca2b745fa145e3aeee3">rdpq_set_fill_color</a></div><div class="ttdeci">void rdpq_set_fill_color(color_t color)</div><div class="ttdoc">Enqueue a SET_FILL_COLOR RDP command.</div><div class="ttdef"><b>Definition:</b> rdpq.h:835</div></div>
<div class="ttc" id="ardpq__debug_8h_html_a803828ee30e0abcd321e5dbc362e7d0d"><div class="ttname"><a href="rdpq__debug_8h.html#a803828ee30e0abcd321e5dbc362e7d0d">rdpq_debug_log</a></div><div class="ttdeci">void rdpq_debug_log(bool show_log)</div><div class="ttdoc">Show a full log of all the RDP commands.</div></div>
<div class="ttc" id="ardpq__debug_8h_html_af3a06bc5bb62b56379694e97ebe7ac4e"><div class="ttname"><a href="rdpq__debug_8h.html#af3a06bc5bb62b56379694e97ebe7ac4e">rdpq_debug_log_msg</a></div><div class="ttdeci">void rdpq_debug_log_msg(const char *str)</div><div class="ttdoc">Add a custom message in the RDP logging.</div></div>
<div class="ttc" id="ardpq__mode_8c_html_a99c5c398b388f6d1683e7405a6058fb9"><div class="ttname"><a href="rdpq__mode_8c.html#a99c5c398b388f6d1683e7405a6058fb9">rdpq_set_mode_fill</a></div><div class="ttdeci">void rdpq_set_mode_fill(color_t color)</div><div class="ttdoc">Reset render mode to FILL type.</div><div class="ttdef"><b>Definition:</b> rdpq_mode.h:299</div></div>
<div class="ttc" id="ardpq__rect_8h_html_a9c6405f89d2fe70046330964c21ba124"><div class="ttname"><a href="rdpq__rect_8h.html#a9c6405f89d2fe70046330964c21ba124">rdpq_fill_rectangle</a></div><div class="ttdeci">#define rdpq_fill_rectangle(x0, y0, x1, y1)</div><div class="ttdoc">Draw a filled rectangle (RDP command: FILL_RECTANGLE)</div><div class="ttdef"><b>Definition:</b> rdpq_rect.h:235</div></div>
</div><!-- fragment --><p >produces this output: </p><pre class="fragment"> [0xa00e7128] f1020000000332a8    RDPQ_MESSAGE     Black rectangle
 [0xa00e7130] ef30000000000000    SET_OTHER_MODES  fill
 [0xa00e7138] ed00000000000000    SET_SCISSOR      xy=(0.00,0.00)-(0.00,0.00)
 [0xa00e7140] f700000000000000    SET_FILL_COLOR   rgba16=(0,0,0,0) rgba32=(0,0,0,0)
 [0xa00e7148] f65001e000000000    FILL_RECT        xy=(0.00,0.00)-(320.00,120.00)
 [0xa00e7150] f1020000000332b8    RDPQ_MESSAGE     Red rectangle
 [0xa00e7158] e700000000000000    SYNC_PIPE
 [0xa00e7160] f7000000f800f800    SET_FILL_COLOR   rgba16=(31,0,0,0) rgba32=(248,0,248,0)
 [0xa00e7168] f65003c0000001e0    FILL_RECT        xy=(0.00,120.00)-(320.00,240.00)
 [0xa00e7170] f101000000000000    RDPQ_SHOWLOG     show=0
</pre><p> where you can see the <code>RDPQ_MESSAGE</code> lines which helps isolate portion of commands with respect to the source lines that generated them.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>message to display </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a847e4cd157797e887fb1d5d2cf611b10" name="a847e4cd157797e887fb1d5d2cf611b10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a847e4cd157797e887fb1d5d2cf611b10">&#9670;&nbsp;</a></span>rdpq_debug_get_tmem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="surface_8h.html#structsurface__t">surface_t</a> rdpq_debug_get_tmem </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acquire a dump of the current contents of TMEM. </p>
<p >Inspecting TMEM can be useful for debugging purposes, so this function dumps it to RDRAM for inspection. It returns a surface that contains the contents of TMEM as a 32x64 FMT_RGBA16 (4K) buffer, but obviously the contents can vary and have nothing to do with this layout.</p>
<p >The function will do a full sync (via <a class="el" href="rspq_8h.html#af3055d289f73a125e15b72429cfc91ed" title="Wait until all commands in the queue have been executed by RSP.">rspq_wait</a>) to make sure the surface data has been fully written by RDP when the function returns.</p>
<p >For the debugging, you can easily dump the contents of the surface calling <a class="el" href="debug_8h.html#ad61db050c61f16ebea19f3610ef57219" title="Do a hexdump of the specified buffer via debugf.">debug_hexdump</a>.</p>
<p >The surface must be freed via <a class="el" href="surface_8h.html#abb7940ed434b55044bf078472f59173e" title="Free the buffer allocated in a surface.">surface_free</a> when it is not useful anymore.</p>
<div class="fragment"><div class="line"><span class="comment">// Get the TMEM contents</span></div>
<div class="line"><a class="code hl_struct" href="surface_8h.html#structsurface__t">surface_t</a> surf = <a class="code hl_function" href="rdpq__debug_8h.html#a847e4cd157797e887fb1d5d2cf611b10">rdpq_debug_get_tmem</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Dump TMEM in the debug spew</span></div>
<div class="line"><a class="code hl_function" href="debug_8c.html#af507aade880b5f43ac256c1c1a8c8d5f">debug_hexdump</a>(surf.<a class="code hl_variable" href="surface_8h.html#a44186bab3de93b8be2c9ae6328dfb8b9">buffer</a>, 4096);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="surface_8c.html#abb7940ed434b55044bf078472f59173e">surface_free</a>(&amp;surf);</div>
<div class="ttc" id="adebug_8c_html_af507aade880b5f43ac256c1c1a8c8d5f"><div class="ttname"><a href="debug_8c.html#af507aade880b5f43ac256c1c1a8c8d5f">debug_hexdump</a></div><div class="ttdeci">void debug_hexdump(const void *vbuf, int size)</div><div class="ttdoc">Do a hexdump of the specified buffer via debugf.</div><div class="ttdef"><b>Definition:</b> debug.c:652</div></div>
<div class="ttc" id="ardpq__debug_8h_html_a847e4cd157797e887fb1d5d2cf611b10"><div class="ttname"><a href="rdpq__debug_8h.html#a847e4cd157797e887fb1d5d2cf611b10">rdpq_debug_get_tmem</a></div><div class="ttdeci">surface_t rdpq_debug_get_tmem(void)</div><div class="ttdoc">Acquire a dump of the current contents of TMEM.</div></div>
<div class="ttc" id="asurface_8c_html_abb7940ed434b55044bf078472f59173e"><div class="ttname"><a href="surface_8c.html#abb7940ed434b55044bf078472f59173e">surface_free</a></div><div class="ttdeci">void surface_free(surface_t *surface)</div><div class="ttdoc">Free the buffer allocated in a surface.</div><div class="ttdef"><b>Definition:</b> surface.c:49</div></div>
<div class="ttc" id="asurface_8h_html_a44186bab3de93b8be2c9ae6328dfb8b9"><div class="ttname"><a href="surface_8h.html#a44186bab3de93b8be2c9ae6328dfb8b9">surface_t::buffer</a></div><div class="ttdeci">void * buffer</div><div class="ttdoc">Buffer pointer.</div><div class="ttdef"><b>Definition:</b> surface.h:143</div></div>
<div class="ttc" id="asurface_8h_html_structsurface__t"><div class="ttname"><a href="surface_8h.html#structsurface__t">surface_t</a></div><div class="ttdoc">A surface buffer for graphics.</div><div class="ttdef"><b>Definition:</b> surface.h:138</div></div>
</div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd>A surface with TMEM contents, that must be freed via <a class="el" href="surface_8h.html#abb7940ed434b55044bf078472f59173e" title="Free the buffer allocated in a surface.">surface_free</a>. </dd></dl>

</div>
</div>
<a id="a1b6e04df491c2d55cba5b622e9404b02" name="a1b6e04df491c2d55cba5b622e9404b02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b6e04df491c2d55cba5b622e9404b02">&#9670;&nbsp;</a></span>rdpq_debug_install_hook()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_debug_install_hook </td>
          <td>(</td>
          <td class="paramtype">void(*)(void *ctx, uint64_t *cmd, int cmd_size)&#160;</td>
          <td class="paramname"><em>hook</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Install a custom hook that will be called every time a RDP command is processed. </p>
<p >This function can be used to perform custom analysis on the RDP stream. It allows you to register a callback that will be called any time a RDP command is processed by the debugging engine.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hook</td><td>Hook function that will be called for each RDP command </td></tr>
    <tr><td class="paramname">ctx</td><td>Context passed to the hook function</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>You can currently install only one hook </dd></dl>

</div>
</div>
<a id="af0a2e1e0864533b9e2068e9af66ecd3b" name="af0a2e1e0864533b9e2068e9af66ecd3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0a2e1e0864533b9e2068e9af66ecd3b">&#9670;&nbsp;</a></span>rdpq_debug_disasm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rdpq_debug_disasm </td>
          <td>(</td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disassemble a RDP command. </p>
<p >This function allows to access directly the disassembler which is part of the rdpq debugging log. Normally, you don't need to use this function: just call <a class="el" href="rdpq__debug_8h.html#a803828ee30e0abcd321e5dbc362e7d0d" title="Show a full log of all the RDP commands.">rdpq_debug_log</a> to see all RDP commands in disassembled format.</p>
<p >This function can be useful for writing tools or manually debugging a RDP stream.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Pointer to the RDP command </td></tr>
    <tr><td class="paramname">out</td><td>Ouput stream where to write the disassembled string <br  />
 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the command was disassembled, false if the command is being held in a buffer waiting for more commands to be appended.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__debug_8h.html#a3a8bc37e59c31488db705e0adf791c35" title="Return the size of the next RDP commands.">rdpq_debug_disasm_size</a> </dd></dl>

</div>
</div>
<a id="a3a8bc37e59c31488db705e0adf791c35" name="a3a8bc37e59c31488db705e0adf791c35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a8bc37e59c31488db705e0adf791c35">&#9670;&nbsp;</a></span>rdpq_debug_disasm_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdpq_debug_disasm_size </td>
          <td>(</td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the size of the next RDP commands. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Pointer to RDP command </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of 64-bit words the command is composed of </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 5 2024 19:06:52 for libdragon by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
